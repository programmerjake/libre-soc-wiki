# PartitionedSignal nmigen-aware Cat

* <https://bugs.libre-soc.org/show_bug.cgi?id=707>

Concatenation of Signals is ordinarily straightforward: reduce to the bitlevel and create a sequence.  The contributors to that sequence may be of arbitrary length.

However for a PartitionedSignal unless *all* contributors are also
PartitionedSignals, the results cannot be guaranteed to match, at all
partition sizes.

Take two PartitionedSignals:

    partition:      p    p    p       (3 bits)
    a        :  AAA3 AAA2 AAA1 AAA0  (32 bits)
    b        :  BBB3 BBB2 BBB1 BBB0  (32 bits)

When the partitions are 32-bit, the output is:

    partition:           p         p         p           (3 bits)
    out      :  AAA3 AAA2 AAA1 AAA0 BBB3 BBB2 BBB1 BBB0  (64 bits)

When 2x16, the top 2 halves of A and B are Catted together,
and likewise the lower:

    partition:           p         p         p           (3 bits)
    out      :  AAA3 AAA2 BBB3 BBB2 AAA1 AAA0 BBB1 BBB0  (64 bits)

Finally when 4x8, each byte is concatenated:

    partition:           p         p         p           (3 bits)
    out      :  AAA3 BBB3 AAA2 BBB2 AAA1 BBB1 AAA0 BBB0  (64 bits)

This then generalises regardless of the number of PartitionedSignals
being Concatenated, and, also, regardless of the actual length of
each individual PartitionedSignal.

To confirm that et us assume that A is 16-bit and B is 32-bit:
